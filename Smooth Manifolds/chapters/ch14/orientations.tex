\chapter{定向}

\section{向量空间的定向}

令 $V$ 是维数 $n\ge 1$ 的向量空间。设
$(E_1,\dots,E_n)$ 和 $\bigl(\wtilde E_1,\dots,\wtilde E_n\bigr)$
是 $V$ 的两组有序基，
如果过渡矩阵 $\bigl(B_j^i\bigr)$ 的行列式为正，那么我们说这两组基
是\emph{一致定向的}，其中过渡矩阵定义为
\[
  E_j=B^i_j\wtilde E_i.  
\]
显然一致定向是 $V$ 的所有有序基集合上的一个等价关系。而且这个等价关系恰好
划分了两个等价类，
任取一组有序基 $(E_1,\dots,E_n)$，显然 $(-E_1,E_2,\dots,E_n)$
和它不是一致定向的，所以这两个有序基处于不同的等价类。
对于任意一组有序基 $\bigl(\wtilde E_1,\dots,\wtilde E_n\bigr)$，
如果其不与 $(E_1,\dots,E_n)$ 一致定向，即 $(E_1,\dots,E_n)$
到 $\bigl(\wtilde E_1,\dots,\wtilde E_n\bigr)$ 的过渡矩阵行列式为负，
那么 $(-E_1,E_2,\dots,E_n)$ 到 $\bigl(\wtilde E_1,\dots,\wtilde E_n\bigr)$ 的过渡矩阵
行列式为正，所以 $\bigl(\wtilde E_1,\dots,\wtilde E_n\bigr)$ 和
$(-E_1,E_2,\dots,E_n)$ 一致定向，故这个等价关系划分了两个等价类。

如果 $\dim V=n\ge 1$，定义 \emph{$V$ 的定向} 是有序基的一个等价类。
如果 $(E_1,\dots,E_n)$ 是 $V$ 的任意一组有序基，我们记其确定的定向为
$[E_1,\dots,E_n]$，以及其相反的定向为 $-[E_1,\dots,E_n]$。
一个附带了定向的向量空间被称为\emph{定向向量空间}。如果 $V$
是定向的，那么在给定定向中的任一有序基 $(E_1,\dots,E_n)$ 都被称为是
\emph{定向的}或者\emph{正定向的}。不在给定定向中的任意基都被称为
是\emph{负定向的}。

对于零维向量空间 $V$ 的特殊情况，我们定义 $V$ 的定向在数 $\pm 1$
中选取。

\begin{example}
  $\mathbb{R}^n$ 的由标准基确定的定向 $[e_1,\dots,e_n]$ 被称为\emph{标准定向}。
  $\mathbb{R}^0$ 的标准定向被定义为 $+1$。
\end{example}

利用交错张量对参数顺序敏感的特性，定向和交错张量之间存在密切联系。

\begin{proposition}
  令 $V$ 是 $n$ 维向量空间。每个非零张量 $\omega\in\Lambda^n(V^*)$
  都确定了一个定向 $\mathcal{O}_\omega$ 为：如果 $n\ge 1$，那么 
  $\mathcal{O}_\omega$ 是有序基 $(E_1,\dots,E_n)$ 的集合，
  满足 $\omega(E_1,\dots,E_n)>0$。如果 $n=0$，那么 $\omega>0$
  的时候 $\mathcal{O}_\omega=+1$，$\omega<0$ 的时候 $\mathcal{O}_\omega=-1$。
  两个非零 $n$-余向量确定了同一个定向当且仅当其中一个是另一个的正的倍数。 
\end{proposition}
\begin{proof}
  $0$-维的情况是显然的，因为 $\Lambda^0(V^*)=\mathbb{R}$。
  假设 $n\ge 1$，对于非零 $\omega\in \Lambda^n(V^*)$，
  我们证明 $\mathcal{O}_\omega$ 确实是一个等价类。

  假设 $(E_i)$ 和 $\bigl(\wtilde E_j\bigr)$ 是 $V$ 的两组有序基，
  $B:V\to V$ 是将 $E_j$ 送到 $\wtilde E_j$ 的线性映射。
  也就是说 $\wtilde E_j=BE_j=B^i_jE_i$，其中 $(B^i_j)$ 表示 $B$
  在 $(E_i)$ 这组基中的表示矩阵。根据
  \autoref{prop:property of alt}，有
  \[
    \omega\bigl(\wtilde E_1,\dots,\wtilde E_n\bigr)  =
    (\det B)\omega(E_1,\dots,E_n).
  \]
  于是 $\bigl(\wtilde E_j\bigr)$ 和 $(E_i)$ 是一致定向的 ($\det B>0$) 当且仅当
  $\omega\bigl(\wtilde E_1,\dots,\wtilde E_n\bigr)$ 和 $\omega(E_1,\dots,E_n)$
  的符号相同，这就表明 $\mathcal{O}_\omega$ 确实是一个等价类。
\end{proof}

如果 $V$ 是定向的 $n$-维向量空间，$\omega$ 是上述确定了 $V$ 的定向的
$n$-余向量，那么我们说 $\omega$ 是\emph{(正)定向的 $n$-余向量}。
例如，$n$-余向量 $e^1\wedge\cdots\wedge e^n$ 是关于 $\mathbb{R}^n$
的标准定向的正定向余向量。

注意到 $\Lambda^n(V^*)$ 是 $1$ 维向量空间，所以选取 $V$ 的定向等价于选取
$\Lambda^n(V^*) \smallsetminus\{0\}$ 的两个连通分支中的一个。

\section{流形的定向}

令 $M$ 是光滑流形。我们定义\emph{$M$ 上的逐点定向}是在每个切空间中的
一个定向的选择。但是这并不是一个非常有用的概念，因为邻近点的定向可能
没有任何关系。为了使得定向和光滑结构产生联系，我们需要额外的条件
确保邻近切空间的定向是彼此一致的。

令 $M$ 是光滑 $n$-流形，配备一个逐点定向。如果 $(E_i)$ 是 $TM$
的一个局部标架，且对于每个 $p\in U$，$(E_1|_p,\dots,E_n|_p)$
都是 $T_pM$ 的正定向的基，那么我们说 $(E_i)$ 是\emph{(正)定向的}。
\emph{负定向}的概念做类似的定义。
 
如果 $M$ 的每个点都在一个定向的局部标架的定义域中，那么我们说
这个逐点定向是\emph{连续的}。定义\emph{$M$ 的定向}为一个连续的逐点定向。
如果 $M$ 存在一个定向，那么我们说 $M$ 是\emph{可定向的}，否则称
$M$ 是\emph{不可定向的}。一个\emph{定向流形}指的是有序对 $(M,\mathcal{O})$，
其中 $M$ 是可定向的光滑流形，$\mathcal{O}$ 是 $M$ 的一个定向。
对于每个 $p\in M$，由 $\mathcal{O}$ 确定的 $T_pM$ 的定向记为 $\mathcal{O}_p$。

如果 $M$ 是零维的，那么定义 $M$ 的定向是在每个点处选取 $\pm 1$ 中的一个数。
这种情况下连续性的概念是无意义的。

\begin{proposition}[由 $n$-形式确定的定向]
  令 $M$ 是一个光滑 $n$-流形，$M$ 上的任意处处非零的 $n$-形式 $\omega$ 都确定了唯一一个
  $M$ 上的定向使得 $\omega$ 在每个点处是正定向的。反之，如果 $M$
  有一个给定的定向，那么存在一个光滑的处处非零 $n$-形式使得在每个点处都是正定向的。
\end{proposition}
\begin{remark}
  此时 $M$ 上的任意处处非零的 $n$-形式都被称为\emph{定向形式}。如果 $M$ 是定向的，
  $\omega$ 是确定了这个定向的定向形式，那么我们说 $\omega$ 是\emph{(正)定向的}。
  如果 $\omega$ 和 $\tilde\omega$ 是两个正定向形式，那么显然有 
  $\tilde\omega=f\omega$，其中 $f$ 是严格正值的光滑函数。
\end{remark}
\begin{proof}
  令 $\omega$ 是处处非零的 $n$-形式。那么 $\omega$ 定义了一个逐点定向，
  我们只需要验证这是连续的。在 $n=0$ 时是平凡的。假设 $n\ge 1$，
  给定 $p\in M$，设 $(E_i)$ 是 $p$ 的某个连通邻域 $U$ 上的局部标架，
  $\bigl(\varepsilon^i\bigr)$ 是其对偶余标架。那么 $\omega$
  在这个标架中表示为 $\omega=f\varepsilon^1\wedge\cdots\wedge\varepsilon^n$，
  其中 $f$ 是连续函数。$\omega$ 处处非零表示 $f$ 处处非零，所以
  对于所有 $U$ 中的点有
  \[
    \omega(E_1,\dots,E_n)=f\neq 0.
  \]
  因为 $U$ 连通，所以上述表达式一定恒正或者恒负，因此给定的标架
  在 $U$ 上要么正定向要么负定向。如果是负定向的，我们可以将 $E_1$
  替换为 $-E_1$ 得到一组新的正定向的标架。因此，由 $\omega$ 确定
  的逐点定向是连续的。

  反之，假设 $M$ 是定向的，令 $\Lambda_+^nT^*M\subseteq \Lambda^nT^*M$
  是由所有点处的正定向的 $n$-余向量构成的开子集。在任意点 $p\in M$
  处，$\Lambda_+^nT^*M$ 与纤维 $\Lambda^n(T_p^*M)$ 的交是上半平面，
  因此是凸集。根据通常的单位分解，存在 $\Lambda_+^nT^*M$ 的一个光滑
  全局截面，即一个正定向的光滑 $n$-形式。
\end{proof}

对于一个定向光滑流形上的光滑坐标卡，如果坐标标架 $\bigl(\partial/\partial x^i\bigr)$
是正定向的，那么我们说这个坐标卡是\emph{正定向的}，如果
坐标标架是负定向的，则称这个坐标卡是\emph{负定向的}。
如果一个光滑图册 $\{(U_\alpha,\varphi_\alpha)\}$ 的任意转移映射
$\varphi_\beta\circ\varphi_\alpha^{-1}$ 在 $\varphi_\alpha(U_\alpha\cap U_\beta)$
中的每个点处都有正的 Jacobi 行列式，那么我们说这个图册是\emph{一致定向的}。

\begin{proposition}[通过坐标图册确定的定向]
  令 $M$ 是光滑带边或者无边流形。给定 $M$ 的一个一致定向的光滑图册，
  存在 $M$ 的一个定向使得给定图册中的每个坐标卡都是正定向的。反之，
  如果 $M$ 是定向的并且 $\partial M=\emptyset$ 或者 $\dim M>1$，
  那么所有定向的光滑坐标卡的集合是 $M$ 的一个一致定向图册。
\end{proposition}
\begin{proof}
  首先假设 $M$ 有一个一致定向的光滑图册。那么图册中的每个坐标卡
  都在定义域中的每个点处确定了一个定向。图册是一致定向的保证
  在两个坐标卡重叠的区域中，两个坐标标架的转移矩阵是行列式为
  正的 Jacobi 矩阵，所以这两个坐标卡在重叠区域确定了相同的定向。
  由于每个点都被一个坐标卡包含，所以这个逐点定向是连续的。

  反之，假设 $M$ 是定向的且 $\partial M=\emptyset$ 或者 $\dim M>1$。
  根据连续性，每个点 $p\in M$ 都被一个定向的局部标架 $(E_1,\dots,E_n)$
  包含，此时取 $p$ 处的一个坐标标架 $\bigl(\partial/\partial x^1,\dots,\partial/\partial x^n\bigr)$，
  有 $E_j=B^i_j\partial/\partial x^i$，由于 $(B_j^i)$ 是连续函数，
  假设这个局部坐标卡是连通的，所以 $\det(B_j^i)$ 恒正或者恒负，所以
  坐标标架要么正定向要么负定向，如果负定向，则可以将坐标 $x^1$ 替换为 
  $-x^1$ 得到一个正定向的坐标标架。于是所有正定向的光滑坐标卡覆盖 $M$，
  且这些坐标卡的转移映射都有正的 Jacobi 行列式，所以构成一个一致定向图册。
  （当 $\dim M=1$ 时对带边流形不适用，因为我们约定边界坐标卡中的最后一个坐标是非负的）
\end{proof}

\begin{proposition}[积定向]
  假设 $M_1,\dots,M_k$ 是定向的光滑流形。那么 $M_1\times\cdots\times M_k$
  上存在唯一的定向，被称为积定向，使得：如果 $\omega_i$ 是 $M_i$ 上给定定向的定向形式，那么
  $\pi_1^*\omega_1\wedge\cdots\wedge\pi_k^*\omega_k$ 是积定向的定向形式。
\end{proposition}
\begin{proof}
  考虑 $k=2$ 的情况即可。设 $M$ 和 $N$ 分别是 $m$ 维和 $n$ 维的定向光滑流形，
  $\omega$ 和 $\eta$ 分别是 $M$ 和 $N$ 上的定向形式。任取 $(p,q)\in M\times N$，
  设 $(E_1,\dots,E_m)$ 和 $(F_1,\dots,F_n)$ 分别是 $T_pM$ 和 $T_qN$ 的基，
  那么 $(E_1,\dots,E_m,F_1,\dots,F_n)$ 是 $T_{(p,q)}(M\times N)$ 的一组基。
  注意到 $d(\pi_M)_{(p,q)}(F_j)=0,d(\pi_N)_{(p,q)}(E_i)=0$，所以
  \begin{equation*}
    \bigl(\pi_M^*\omega\wedge\pi_N^*\eta\bigr)_{(p,q)}(E_1,\dots,E_m,F_1,\dots,F_n)
    \\
    =\omega_{p}(E_1,\dots,E_m)\eta_q(F_1,\dots,F_n)\neq 0,
  \end{equation*}
  这就表明 $\pi_M^*\omega\wedge\pi_N^*\eta$ 是处处非零的 $(m+n)$-形式，
  所以它确定了 $M\times N$ 上的一个定向。
  % 此时 $M_i$ 的一致定向图册之积构成 $M_1\times\cdots\times M_k$
  % 的一个一致定向图册，所以给出 $M_1\times\cdots\times M_k$ 上的一个定向。
  % 任取 $(p_1,\dots,p_k)\in M_1\times\cdots\times M_k$，那么
  % $\omega_i|_{p_i}$ 是 $T_{p_i}M_i$ 上的定向 $n_i$-余向量 ($\dim M_i=n_i$)，
  % 取 $T_{p_i}M_i$ 的一组定向基 $\bigl(E_1^{(i)},\dots,E_{n_i}^{(i)}\bigr)$，
  % 那么
  % \[
  %   \omega_i|_p\bigl(E_1^{(i)},\dots,E_{n_i}^{(i)}\bigr)>0,
  % \]
  % 显然 $\bigl(E_1^{(1)},\dots,E_{n_1}^{(1)},\dots,E_1^{(k)},\dots,E_{n_k}^{(k)}\bigr)$
  % 是 $T_{(p_1,\dots,p_k)}(M_1\times\cdots\times M_k)$ 的一组定向基，
  % 由于 $\pi_i^*\omega_i$ 的参数存在 
  % 我们有
  % \[
  %   \pi_1^*\omega_1\wedge\cdots\wedge \pi_k^*\omega_k
  %   \bigl(E_1^{(1)},\dots,E_{n_1}^{(1)},\dots,E_1^{(k)},\dots,E_{n_k}^{(k)}\bigr)
  %   =\prod_{i=1}^k
  %   \pi_i^*\omega_i\bigl(E^{(i)}_{1},\dots,E_{n_i}^{(i)}\bigr)>0,
  % \]
\end{proof}

\begin{proposition}
  令 $M$ 是连通的定向的带边或者无边光滑流形，那么 $M$ 恰有两个定向。如果 $M$
  的两个定向在某个点处相同，那么它们相等。
\end{proposition}
\begin{proof}
  设 $\mathcal{O}$ 和 $\wtilde{\mathcal{O}}$ 是 $M$ 的两个定向。
  对于任意的 $p\in M$，$\mathcal{O}_p$ 和 $\wtilde{\mathcal{O}}_p$
  要么相同要么相反，定义函数 $f:M\to \{\pm 1\}$ 为
  \[
    f(p)=\begin{cases}
      1 & \mathcal{O}_p=\wtilde{\mathcal{O}}_p,\\
      -1 & \mathcal{O}_p=-\wtilde{\mathcal{O}}_p,
    \end{cases}
  \]
  根据连续性，存在 $p$ 处的连通邻域 $U$ 上的定向局部标架
  $\bigl(E_1,\dots,E_n\bigr)$ 和 $\bigl(\wtilde E_1,\dots,\wtilde E_n\bigr)$，
  分别对应定向 $\mathcal{O}$ 和 $\wtilde{\mathcal{O}}$。
  那么 $E_j=A_j^i\wtilde E_i$，其中 $(A_j^i):U\to \GL(n,\mathbb{R})$
  是连续函数，所以行列式 $\det(A_j^i):U\to \mathbb{R}^\times$ 是连续函数，
  $U$ 连通表明 $\det(A^i_j)$ 恒正或者恒负，这就表明在 
  $U$ 上 $\mathcal{O}=\pm\wtilde{\mathcal{O}}$，所以 $f$ 是局部常值函数。
  $M$ 连通表明 $f$ 是常值函数，这就说明 $M$ 恰有两个定向
  且由其在任意点处的定向决定。
\end{proof}

\begin{proposition}[余维数 $0$ 的子流形的定向]
  设 $M$ 是一个定向的带边或者无边光滑流形，$D\subseteq M$
  是余维数为 $0$ 的带边或者无边光滑子流形。那么 $M$ 的定向限制到
  $D$ 上是 $D$ 的一个定向。如果 $\omega$ 是 $M$ 上的定向形式，那么
  $\iota_D^*\omega$ 是 $D$ 上的定向形式。
\end{proposition}
\begin{proof}
  设 $\mathcal{O}$ 是 $M$ 上的定向，$\mathcal{O}|_D$ 是 $\mathcal{O}$
  在 $D$ 上的限制。由于 $D$ 是余维数为 $0$ 的子流形，所以是嵌入子流形。
  任取 $p\in D$，$T_pD$ 可以等同为 $T_pM$，所以 $\mathcal{O}|_D$
  可以视为 $D$ 上的定向。

  如果 $\omega$ 是 $M$ 上的定向形式，设 $M$ 是 $n$-维的，那么任取 $p\in D$，
  对于任意基 $E_1,\dots,E_n\in T_pD=T_pM$，
  有 $(\iota_D^*\omega)_p(E_1,\dots,E_n)=\omega_p(E_1,\dots,E_n)\neq 0$，
  所以 $\iota_D^*\omega$ 是 $D$ 上的处处非零的 $n$-形式，即一个定向形式。
\end{proof}

令 $M,N$ 是一个定向的带边或者无边光滑流形，$F:M\to N$
是局部微分同胚。如果对于每个 $p\in M$，同构 $\d F_p$
将 $T_pM$ 的定向基送到 $T_{F(p)}N$ 的定向基，那么我们说 $F$
是 \emph{保定向的}。如果 $\d F_p$ 将 $T_pM$ 的定向基送到 $T_{F(p)}N$ 的负定向基，
那么我们说 $F$ 是 \emph{反定向的}。

\begin{proposition}[拉回定向]
  设 $M,N$ 是带边或者无边光滑流形。如果 $F:M\to N$ 是局部微分同胚且
  $N$ 是定向的，那么 $M$ 有唯一的定向使得 $F$ 是保定向的映射，
  这个定向被称为\emph{拉回定向}。
\end{proposition}
\begin{proof}
  对于每个 $p\in M$，存在唯一的 $T_pM$ 上的定向使得同构 $\d F_p:T_pM\to T_{F(p)}N$
  是保定向的，这定义了 $M$ 上的一个逐点定向。选取 $N$ 的一个定向形式 $\omega$，
  那么 $F^*\omega$ 是 $M$ 上的确定了这个逐点定向的微分形式，所以这个逐点定向是连续的。
\end{proof}

在这种情况下，如果 $\mathcal{O}$ 是 $N$ 上的定向，那么 $M$ 上的拉回定向
记为 $F^*\mathcal{O}$。

回顾一个有光滑全局标架的光滑流形被称为\emph{可平行化的}。

\begin{proposition}
  每个可平行化的光滑流形都是可定向的。
\end{proposition}
\begin{proof}
  设 $M$ 是光滑流形，$(E_1,\dots,E_n)$ 是 $M$ 的一个全局标架，
  那么在每个点 $p\in M$ 处都确定了一个定向基 $\bigl(E_1|_p,\dots,E_n|_p\bigr)$，
  这给出了 $M$ 的一个逐点定向。由于每个点都被这个全局标架包含，所以
  这个逐点定向自然是连续的。
\end{proof}

特别地，这表明李群都是可定向的，因为李群有一个左不变向量场构成的全局标架。

在李群的情况下，如果 $G$ 是李群，对于每个 $g\in G$，$L_g$
都是保定向的，那么我们说这个定向是\emph{左不变的}。

\begin{proposition}
  每个李群恰有两个左不变定向，对应于其李代数的两个定向。
\end{proposition}
\begin{proof}
  设 $[v_1,\dots,v_n]$ 和 $-[v_1,\dots,v_n]$ 是 $T_eG$ 的两个定向，
  那么 $v_1^\LL,\dots,v_n^\LL$ 是 $G$ 的一个光滑全局标架且确定了
  $G$ 上的一个定向 $\mathcal{O}$。我们说明这个定向是左不变的。任取 $g\in G$，
  设 $\omega$ 是 $\mathcal{O}$ 的定向形式，那么对于任意
  $g'\in G$，由于 $v_i^\LL|_{gg'}=\d (L_{gg'})_e(v_i)$，所以
  \[
    \omega_{gg'}\bigl(\d (L_{gg'})_e(v_1),\dots,\d (L_{gg'})_e(v_n)\bigr)>0,
  \]
  即
  \[
    (L_g^*\omega)_{g'}\bigl(\d (L_{g'})_e(v_1),\dots,\d (L_{g'})_e(v_n)\bigr)>0.
  \]
  任取定向基 $w_1,\dots,w_n\in T_{g'}G$，所以 $(w_1,\dots,w_n)$ 和 $\bigl(\d (L_{g'})_e(v_1),\dots,\d (L_{g'})_e(v_n)\bigr)$
  是一致定向的，即有正行列式的过渡矩阵 $(B^i_j)$，所以
  \[
    (L_g^*\omega)_{g'}(w_1,\dots,w_n)=\det(B^i_j)\cdot (L_g^*\omega)_{g'}\bigl(\d (L_{g'})_e(v_1),\dots,\d (L_{g'})_e(v_n)\bigr)>0.
  \]
  这就表明 $L_g^*\omega$ 也是 $\mathcal{O}$ 的定向形式，即
  $L_g^* \mathcal{O}=\mathcal{O}$，$\mathcal{O}$ 是左不变定向。
  类似的，$-[v_1,\dots,v_n]$ 确定了另一个左不变定向。
\end{proof}

\subsection{超曲面的定向}

如果 $M$ 是定向光滑流形，$S$ 是 $M$ 的一个光滑子流形（带边或者无边），
那么 $S$ 也可能没有从 $M$ 继承的定向，即使 $S$ 是嵌入的。显然，
简单的将 $M$ 的定向形式限制到 $S$ 上是不行的，因为 $n$-形式限制到
低维上必然变成零。一个例子是 M\"obius 带，即使其可以嵌入到 $\mathbb{R}^3$
中，其也不可定向。

本小节我们关注浸入或者嵌入的超曲面（余维数为 $1$ 的子流形）的定向。
在附带额外信息（一个与超曲面处处不相切的向量场）的情况下，我们可以利用
$M$ 上的定向导出超曲面上的一个定向。

假设 $M$ 是带边或者无边光滑流形，$S\subseteq M$ 是 $M$ 的一个光滑
子流形（浸入或者嵌入，带边或者无边）。回顾一个沿 $S$ 的向量场指的是环境
切丛 $TM|_S$ 的一个截面，即一个连续映射 $N:S\to TM$ 使得对于每个 $p\in S$
有 $N_p\in T_pM$。例如，$M$ 上的任意向量场都可以限制到一个沿 $S$
的向量场，但是一般来说，不是每个沿 $S$ 的向量场都有这种形式。

\begin{proposition}\label{prop:induced orientation on hypersurface}
  设 $M$ 是一个定向的带边或者无边光滑 $n$-流形，$S\subseteq M$ 是 $M$ 的一个
  带边或者无边的浸入超曲面，$N$ 是一个沿 $S$ 的向量场且与 $S$ 处处不相切。
  那么 $S$ 有一个唯一的定向，使得：对于每个 $p\in S$，$(E_1,\dots,E_{n-1})$
  是 $T_pS$ 的一个定向基当且仅当 $(N_p,E_1,\dots,E_{n-1})$ 是 $T_pM$ 的一个定向基。
  如果 $\omega$ 是 $M$ 上的定向形式，那么 $\iota_S^*(N\into\omega)$ 是
  $S$ 上的关于上述定向的定向形式。
\end{proposition}
\begin{proof}
  令 $\omega$ 是 $M$ 上的定向形式。那么 $\sigma=\iota_S^*(N\into \omega)$ 是
  $S$ 上的一个 $(n-1)$-形式。我们证明 $\sigma$ 处处非零即可表明其是一个定向形式。
  任取 $T_pS$ 的基 $(E_1,\dots,E_{n-1})$，$N$ 与 $S$ 处处不相切表明
  $(N_p,E_1,\dots,E_{n-1})$ 是 $T_pM$ 的一组基。$\omega$ 处处非零表明
  \[
    \sigma_p(E_1,\dots,E_{n-1})=\omega_p(N_p,E_1,\dots,E_{n-1})\neq 0.
  \]
  因为 $\sigma_p(E_1,\dots,E_{n-1})>0$ 当且仅当 $\omega_p(N_p,E_1,\dots,E_{n-1})>0$，
  所以 $\sigma$ 就是满足命题要求的定向形式。
\end{proof}

\begin{example}
  球面 $\mathbb{S}^n$ 是 $\mathbb{R}^{n+1}$ 的一个嵌入超曲面，向量场
  $N=x^i\partial/\partial x^i$ 与 $\mathbb{S}^n$ 处处不相切，所以这个向量场
  诱导了 $\mathbb{S}^n$ 上的一个定向。这表明所有的球面都是可定向的。
  我们把这个 $N$ 确定的定向称为 $\mathbb{S}^n$ 的\emph{标准定向}。
\end{example}

不是所有的超曲面都有一个处处不相切的向量场。但是，下面的命题提供了一个在大部分情况下
都满足的充分条件。

\begin{proposition}
  令 $M$ 是定向的光滑流形，$S\subseteq M$ 是光滑函数 $f:M\to \mathbb{R}$
  的正则水平集，那么 $S$ 可定向。
\end{proposition}
\begin{proof}
  选取 $M$ 上的任意黎曼度量，令 $N=\grad f|_S$。那么 $N$ 与 $S$ 处处不相切，
  所以 $S$ 可定向。
\end{proof}

\subsection{边界定向}

如果 $M$ 是带边的光滑流形，那么 $\partial M$ 是 $M$ 的嵌入超曲面。并且可以证明
总是存在一个沿 $\partial M$ 的向外的光滑向量场。这确定了 $\partial M$ 上的一个定向。

\begin{proposition}[边界上的诱导定向]
  令 $M$ 是定向的带边光滑 $n$-流形，$n\geq 1$。那么 $\partial M$ 是可定向的，
  并且所有沿 $\partial M$ 的向外的向量场都确定了 $\partial M$ 上的同一个定向。
\end{proposition}
\begin{remark}
  由任意一个向外的向量场诱导的 $\partial M$ 上的定向被称为 $\partial M$
  上的\emph{诱导定向}或者\emph{Stokes 定向}。
\end{remark}
\begin{proof}
  令 $\omega$ 是 $M$ 上的定向形式，$N$ 是沿 $\partial M$ 的一个向外的向量场。
  根据 \autoref{prop:induced orientation on hypersurface}，$(n-1)$-形式
  $\iota_{\partial M}^*(N\into\omega)$ 是 $\partial M$ 上的一个定向形式，
  所以 $\partial M$ 是可定向的。

  下面说明这个定向不依赖于 $N$ 的选取。任取 $p\in\partial M$，$(x^i)$ 
  是 $M$ 的光滑边界坐标。如果 $N$ 和 $\wtilde N$ 是两个不同的沿 $\partial M$ 的
  向外的向量场，那么 $N^n(p)$ 和 $\wtilde N^n(p)$ 的最后一个分量都是负数。
  $\bigl(N_p,\partial/\partial x^1|_p,\dots,\partial/\partial x^n|_p\bigr)$
  和 $\bigl(\wtilde N_p,\partial/\partial x^1|_p,\dots,\partial/\partial x^n|_p\bigr)$
  都是 $T_pM$ 的基，并且它们之间的过渡矩阵的行列式为 $N^n(p)/\wtilde N^n(p)>0$。
  因此，这两组基确定了 $T_pM$ 上的同一个定向，所以 $N$ 和 $\wtilde N$ 诱导了 $\partial M$ 上的同一个定向。
\end{proof}

\begin{example}
  当 $\mathbb{H}^n$ 本身取 $\mathbb{R}^n$ 的标准定向的时候，我们确定
  $\partial \mathbb{H}^n$ 上的诱导定向。我们将 $\partial \mathbb{H}^n$
  和 $\mathbb{R}^{n-1}$ 通过 $\bigl(x^1,\dots,x^{n-1},0\bigr)\leftrightarrow \bigl(x^1,\dots,x^{n-1}\bigr)$
  等同。因为向量场 $-\partial/\partial x^n$ 是沿 $\partial \mathbb{H}^n$ 的一个向外的向量场，
  所以 $\mathbb{R}^{n-1}$ 的标准坐标标架在 $\partial \mathbb{H}^n$ 上是正定向的当且仅当
  $\bigl[-\partial/\partial x^n,\partial/\partial x^1,\dots,\partial/\partial x^{n-1}\bigr]$
  是 $\mathbb{R}^n$ 的标准定向。而这个定向满足
  \begin{align*}
    \bigl[-\partial/\partial x^n,\partial/\partial x^1,\dots,\partial/\partial x^{n-1}\bigr]
    &=-\bigl[\partial/\partial x^n,\partial/\partial x^1,\dots,\partial/\partial x^{n-1}\bigr]\\
    &=(-1)^n\bigl[\partial/\partial x^1,\dots,\partial/\partial x^{n-1},\partial/\partial x^n\bigr].
  \end{align*}
  因此，当 $n$ 为偶数时，$\partial \mathbb{H}^n$ 上的诱导定向与 $\mathbb{R}^{n-1}$ 的标准定向相同。
  但是，当 $n$ 为奇数时，$\partial \mathbb{H}^n$ 上的诱导定向与 $\mathbb{R}^{n-1}$ 的标准定向相反。
  也就是说，$\partial \mathbb{H}^n\approx \mathbb{R}^{n-1}$ 上的标准坐标是正定向的当且仅当 $n$ 是偶数。
\end{example}

出于许多目的，最常用的描述流形的方式是局部参数化。下面的引理给出了一个
判别边界的局部参数化是否保定向的方法。

\begin{lemma}
  令 $M$ 是定向的带边光滑 $n$-流形。假设 $U\subseteq \mathbb{R}^{n-1}$ 是开集，
  $a<b$ 是实数，$F:(a,b]\times U\to M$ 是光滑嵌入并且限制到一个 $\{b\}\times U\to \partial M$
  的嵌入。定义参数化 $f:U\to\partial M$ 为 $f(x)=F(b,x)$，那么 $f$ 是保定向的当且仅当
  $F$ 是保定向的。
\end{lemma}
\begin{proof}
  任取 $x\in U$，令 $p=f(x)=F(b,x)\in\partial M$。$F$ 是嵌入表明线性映射
  $d F_{(b,x)}:\bigl(T_b \mathbb{R}\times T_x \mathbb{R}^{n-1}\bigr)\to T_pM$
  是双射。因为 $dF_{(b,x)}$ 限制到 $T_x \mathbb{R}^{n-1}$ 就是 $df_x: T_x \mathbb{R}^{n-1}\to T_p\partial M$，
  这是一个单射，这表明 $dF\bigl(\partial/\partial s|_{(b,x)}\bigr)\notin T_p\partial M$
  (其中 $s$ 是 $(a,b]$ 上的坐标)。

  定义光滑曲线 $\gamma:[0,\varepsilon)\to M$ 为
  \[
    \gamma(t)=F(b-t,x).
  \]
  这个曲线满足 $\gamma(0)=p$ 且 $\gamma'(0)=-\d F\bigl(\partial/\partial s|_{(b,x)}\bigr)\notin T_p\partial M$。
  这表明 $-\d F\bigl(\partial/\partial s|_{(b,x)}\bigr)$ 是向内的，因此
  $\d F\bigl(\partial/\partial s|_{(b,x)}\bigr)$ 是向外的。

  于是我们有下面的等价关系：
  \begin{align*}
    &\text{$F$ 保定向}\\
    &\Leftrightarrow \text{$\bigl(\d F(\partial/\partial s), \d F(\partial/\partial x^1),\dots,\d F(\partial/\partial x^{n-1})\bigr)$ 是 $TM$ 的定向标架}\\
    &\Leftrightarrow \text{$\bigl(\d F(\partial/\partial x^1),\dots,\d F(\partial/\partial x^{n-1})\bigr)$ 是 $T\partial M$ 的定向标架}\\
    &\Leftrightarrow \text{$\bigl(\d f(\partial/\partial x^1),\dots,\d f(\partial/\partial x^{n-1})\bigr)$ 是 $T\partial M$ 的定向标架}\\
    &\Leftrightarrow \text{$f$ 保定向}.\qedhere
  \end{align*}
\end{proof}

\begin{example}\label{exa:orientation of sphere}
  球坐标导出了 $\mathbb{S}^2$ 的一个光滑局部参数化。令 $U$
  是开矩形 $(0,\pi)\times (0,2\pi)\subseteq \mathbb{R}^2$，令 $X:U\to \mathbb{R}^3$
  是映射
  \[
    X(\varphi,\theta)=(\sin\varphi\cos\theta,\sin\varphi\sin\theta,\cos\varphi).
  \]
  我们定义 $3$-维球体的参数化 $F:(0,1]\times U\to\bar{\mathbb{B}}^3$ 为
  \[
    F(\rho,\varphi,\theta)=(\rho\sin\varphi\cos\theta,\rho\sin\varphi\sin\theta,\rho\cos\varphi).
  \]
  那么 $F(1,\varphi,\theta)=X(\varphi,\theta)$。由于 $F$ 的 Jacobi 行列式是
  $\rho^2\sin\varphi>0$，所以 $F$ 是保定向的。根据上面的引理，$X$ 也是保定向的。

  也可以直接计算。$X$ 的 Jacobi 矩阵为
  \[
    JX(\theta,\varphi)=\begin{pmatrix}
      \cos\varphi\cos\theta & -\sin\varphi\sin\theta \\
      \cos\varphi\sin\theta & \sin\varphi\cos\theta \\
      -\sin\varphi & 0
    \end{pmatrix},
  \]
  与 $X(\varphi,\theta)$ 共同构成 $\mathbb{R}^3$ 的积向量
  \[
    \begin{pmatrix}
      \sin\varphi\cos\theta & \cos\varphi\cos\theta & -\sin\varphi\sin\theta \\
      \sin\varphi\sin\theta & \cos\varphi\sin\theta & \sin\varphi\cos\theta \\
      \cos\varphi & -\sin\varphi & 0
    \end{pmatrix}.
  \]
  上述矩阵有行列式 $\sin\varphi>0$，所以是正定向的基。
  这表明 $X$ 是保定向的。
\end{example}



\section{黎曼体积形式}

令 $(M,g)$ 是定向的黎曼流形。我们知道在 $M$ 的每个点的邻域中都存在
一个光滑的正交标架 $(E_1,\dots,E_n)$。通过将 $E_1$ 替换为 $-E_1$，
我们可以在每个点的邻域中找到一个定向的正交标架。

\begin{proposition}
  设 $(M,g)$ 是一个定向的黎曼 $n$-流形，且 $n\geq 1$。那么存在唯一的
  光滑定向形式 $\omega_g\in\Omega^n(M)$，满足对于每个定向的局部正交标架
  $(E_i)$ 都有
  \begin{equation}\label{eq:riemann volumn form}
    \omega_g(E_1,\dots,E_n)=1,
  \end{equation}
  这个定向形式被称为\emph{黎曼体积形式}。
\end{proposition}
\begin{proof}
  首先说明 $\omega_g$ 的唯一性。如果 $(E_1,\dots,E_n)$ 是开集 $U\subseteq M$ 上的任意定向的
  局部正交标架，$(\varepsilon^1,\dots,\varepsilon^n)$ 是其对偶余标架。
  那么我们有局部表示 $\omega_g=f\varepsilon^1\wedge\cdots\wedge \varepsilon^n$，
  \eqref{eq:riemann volumn form} 表明 $f=1$，所以
  \begin{equation}\label{eq:riemann volumn form2}
    \omega_g=\varepsilon^1\wedge\cdots\wedge\varepsilon^n.
  \end{equation}
  这表明 $\omega_g$ 是唯一确定的。

  下面说明存在性，我们希望通过 \eqref{eq:riemann volumn form2} 式来在每个点的
  邻域上定义 $\omega_g$，所以我们说明这个定义和定向正交标架的选取无关。
  如果 $\bigl(\wtilde E_1,\dots,\wtilde E_n\bigr)$ 是另一组定向正交标架，
  有对偶余标架 $\bigl(\tilde\varepsilon^1,\dots,\tilde\varepsilon^n\bigr)$，
  令
  \[
    \wtilde\omega_g=\tilde\varepsilon^1\wedge\cdots\wedge \tilde\varepsilon^n.
  \]
  这两组正交标架之间有关系 $\wtilde E_j=A_j^iE_i$，正交性表明系数矩阵
  $(A_j^i)$ 是正交矩阵，所以
  \[
    \omega_g\bigl(\wtilde E_1,\dots,\wtilde E_n\bigr)
    =\det\bigl(\varepsilon^i(\wtilde E_j)\bigr)=
    \det(A_j^i)=1=\wtilde\omega_g\bigl(
      \wtilde E_1,\dots,\wtilde E_n
    \bigr).
  \]
  这表明 $\omega_g=\wtilde\omega_g$，所以 \eqref{eq:riemann volumn form2} 式
  是良好定义的，这给出了一个全局 $n$-形式且满足要求。
\end{proof}

\begin{proposition}
  设 $(M,g)$ 是一个定向的黎曼 $n$-流形，且 $n\geq 1$。在任意定向光滑坐标 
  $\bigl(x^i\bigr)$ 中，黎曼体积形式有局部表示
  \[
    \omega_g=\sqrt{\det(g_{ij})}\d x^1\wedge\cdots\wedge \d x^n.
  \]
\end{proposition}
\begin{proof}
  设 $\bigl(U,\bigl(x^i\bigr)\bigr)$ 是一个定向的光滑坐标卡，
  令 $p\in M$。此时 $\omega_g$ 有局部表示 $\omega_g=f\d x^1\wedge\cdots\wedge \d x^n$，
  其中 $f$ 是正值函数。令 $(E_i)$ 是定义在 $p$ 的某个邻域上的
  定向正交标架，$\bigl(\varepsilon^i\bigr)$ 是其对偶余标架。
  此时我们可以把坐标标架表示为
  \[
    \frac{\partial}{\partial x^j}=A^i_jE_i ,
  \]
  所以我们可以计算
  \begin{equation*}
    f=\omega_g\left( \frac{\partial}{\partial x^1},\dots, \frac{\partial}{\partial x^n}\right)
    =\det(A^i_j)\ \omega_g(E_1,\dots,E_n)=\det(A_j^i).
  \end{equation*}
  另一方面，注意到
  \[
    g_{ij}=\inn{\frac{\partial}{\partial x^i},\frac{\partial}{\partial x^j}}_g =
    \inn{A^k_iE_k,A^l_jE_l}_g=A_i^kA_j^l\inn{E_k,E_l}_g
    =\sum_{k=1}^n A_i^kA_j^k.
  \]
  于是 $g_{ij}$ 是 $A^TA$ 的第 $(i,j)$-元，所以
  \[
    \det(g_{ij})=\det(A^TA)=(\det A)^2,
  \]
  故 $f=\det A=\sqrt{\det(g_{ij})}$。
\end{proof}

\subsection{黎曼流形中的超曲面}

令 $(M,g)$ 是定向的带边或者无边黎曼流形，$S\subseteq M$
是浸入的带边或者无边超曲面。任意沿 $S$ 的单位法向量场
都与 $S$ 处处不相切，所以确定了 $S$ 的一个定向。
下面的命题给出了在这个定向下 $S$ 上诱导黎曼度量的
体积形式。

\begin{proposition}\label{prop:volumn form on submanifolds}
  令 $(M,g)$ 是定向的带边或者无边黎曼流形，$S\subseteq M$
  是浸入的带边或者无边超曲面，$\tilde g$ 是 $S$ 上的诱导黎曼度量。
  假设 $N$ 是光滑的沿 $S$ 的单位法向量场。相对于 $S$ 的由 $N$
  确定的定向，$(S,\tilde g)$ 的体积形式为 
  \[
    \omega_{\tilde{g}}=\iota_S^*(N\into \omega_g).
  \]
\end{proposition}
\begin{proof}
  \autoref{prop:induced orientation on hypersurface} 已经表明
  $\iota_S^*(N\into \omega_g)$ 是 $S$ 上的定向形式。
  假设 $(E_1,\dots,E_{n-1})$ 是 $S$ 上的定向正交标架，那么对于任意 $p\in S$，
  $(N_p,E_1|_p,\dots,E_{n-1}|_p)$ 是 $T_pM$ 的定向正交基，所以
  \[
    \iota_S^*(N\into\omega_g)(E_1,\dots,E_{n-1})
    =\omega_g(N,E_1,\dots,E_{n-1})=1.
  \]
  这就表明 $\omega_{\tilde g}$ 是体积形式。
\end{proof}

\begin{proposition}
  设 $M$ 是带边的黎曼流形，存在唯一的沿 $\partial M$
  的向外的光滑法向量场 $N$。
\end{proposition}
\begin{proof}
  首先证明唯一性。
\end{proof}


